function parse(){const e=document.getElementsByTagName("main")[0],s=[];hash().split(",").map(e=>{for(let t=e.length;t>0;t--)if(e.substr(0,t).toLowerCase()in NOTES){const o=NOTES[e.substr(0,t).toLowerCase()],r=CHORDS[e.substr(t).toLowerCase()];let a=transpose(r,o),n=Number(a[0]),p=Number(a[a.length-1]);return p-n<12&&(n-=Math.floor(12-(p-n)/2),p+=Math.ceil(12-(p-n)/2)),a=transpose(a,5*OCTAVE),s.push(a),midi(e.substr(0,1).toUpperCase()+e.substr(1).toLowerCase(),a,5,"block",0,n+5*OCTAVE,p+5*OCTAVE)}}).filter(e=>e).forEach(s=>e.appendChild(s));const t=query();t.has("progression")&&t.get("progression")&&document.getElementsByTagName("body")[0].appendChild(progression(s,5,"block"))}